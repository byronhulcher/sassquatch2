// STUFF THAT NEEDS TO GET / ------------- avtars ---------

.avatar{
	display: inline-block!important
}


// ------------  paragraphs should be set by bounds, otherwise it gets weird ------------

p{
	max-width: none!important;
}


// ------------  borderless buttons have a hard time setting space sometimes ------------

.button.button--slight{
	//background-color: rgba(0,0,0,.02);
}
.button{
	display: block;
}

// ------------  RESPONSIVE GRID ------------

.columnGroup{
	display: flex;
	margin-right: -($space);
	.column{
		box-sizing: border-box;
		padding-right: $space;
		overflow: hidden;
	}
	$sizes: ( 2, 3, 4, 5, 6, 7 );
	@each $s in $sizes {
		@for $i from 1 through $s {
			.size#{$i}of#{$s}{
				width: percentage($i/$s);
			}
		}
	}
}

.align-center{
	text-align: center;
}
.none{
	display: none;
}
.block{
	display: block;
}
.inline{
	display: inline;
}
.inlineblock{
	display: inline-block;
}

// redo to use mediaup
$breakpoints: ( large: $breakpoint-l, medium: $breakpoint-m, small: $breakpoint-s );
@each $bname, $bp in $breakpoints {
	@include atMediaDown($bname){
		.linear--at-#{$bname}{
			display: block;
			margin-right: 0;
			.column{
				width: auto;
			}
		}
		.none--at-#{$bname}{
			display: none;
		}
		.block--at-#{$bname}{
			display: block;
		}
		.inline--at-#{$bname}{
			display: inline;
		}
		.inlineblock--at-#{$bname}{
			display: inline-block;
		}
	}
}


@include atMediaUp(large) {
	.chunkList.chunkList--grid{
		display: flex;
		flex-direction: row;		
		& > li{
			width: 33.33%;
			border-top: none;
			padding-right: $space;
			box-sizing: border-box;
		}
	}
}

// ------------ NEW FFBOX with fallbacks to display:table ------------



.ffbox {
    @include box-sizing(border-box);
    width: 100%;
    display: table;

    .ffbox-fix,
    .ffbox-flex {
        display: table-cell;
        vertical-align: middle;
        width: 1%;
    }

    .ffbox-flex {
        width: 100%;
    }
}

.ffbox--flip{
    direction: rtl;
    .ffbox-fix,
    .ffbox-flex {
        direction: ltr;
    }
}

.ffbox--fixed {
  table-layout: fixed;
}





// ------------ TABS (general) ------------


.tabs{
  line-style: none;
  margin: 0;
  padding: 0;
  display: block;
  li{
    $lineh: 4px;
    color : $C_textTertiary;
    padding: 0;
    margin: 0 0 0 $space;
    cursor: pointer;
    display: inline-block;
    border-bottom: $lineh solid transparent;
    &:first-child{
      margin-left: 0;
    }
    &:hover {
      color: $C_textSecondary;
    }
    &.selected{
      color: $C_red;
      border-bottom: $lineh solid $C_red;
    }

    .inverted & {
      color : $C_textTertiaryInverted;
      &:hover {
        color: $C_textSecondaryInverted;
      }
      &.selected{
        color: $C_textPrimaryInverted;
        border-bottom-color: $C_textPrimaryInverted;
      }
    }

  }
  &.full{
    display: table;
    table-layout: fixed;
    width: 100%;
    li{
      display: table-cell;
      margin: 0;
      text-align: center;
    }
  }
}

.ios {
  .tabs{
    border: 1px solid $C_link;
    border-radius: 6px;
    display: inline-block;
    font-size: $font-size-small;
    line-height: $space;
    overflow: hidden;

    li{
      border-bottom: none;
      border-right: 1px solid $C_link;
      color: $C_link;
      height: $space;
      margin: 0;
      padding: $space-quarter $space-half;

      &:first-child{
        margin-left: 0;
      }
      &:hover {
        color: $C_link;
      }

      &:last-child,
      &.selected {
        border-right: none;
      }

      &.selected{
        background: $C_link;
        color: $C_textPrimaryInverted;
        border-bottom: none;
      }

      .inverted & {
        color : $C_link;
        &.selected{
          color: $C_textPrimary;
          border-bottom-color: $C_textPrimaryInverted;
        }
      }

    }
  }
}



// ------------ NAV (top-level) ------------

/*

web: fix to top in ADDITION to navbar add to offset
android: fix to top, move navbar to bottom (hide back, title)
$ios: fixed position bottom EASY

*/

// body.has-nav
.has-nav{
  .view{
    margin-top: $block;
  }
  .viewHead{
    top: $block;
  }
}

#nav{
    // try to align without this
  // @extend %v-align-children--bottom;

    background: $C_accentDark;
  top: 0;
  height: $block;
  left: 0;
  position: fixed;
  width: 100%;
  z-index: map-get($indexes, "main-header");
  .docBounds {
    padding: 0 $space;
    //max-width: none;
  }

  li{
    color : $C_textSecondaryInverted;
    &.selected{
      color: $C_textPrimaryInverted;
      border-bottom-color: $C_textPrimaryInverted;
    }
  }

  .ios &{
    background: white;
    li{
      color : $C_textTertiary;
      &.selected{
        color: $C_accent;
        border-bottom-color: $C_accent;
      }
    }
  }
}



// ------------ CHAT ------------
@mixin chatBubbleOptions($color, $direction, $tail){
  margin-#{$direction}: 0;
  text-align: #{$direction};
  .content{
    float: #{$direction};
    background: $color;
    &:last-child{
      border-bottom-#{$direction}-radius: 0;
      &:after{
        #{$direction}: -($tail);
        border-bottom-color: $color;
      }
    }
  }
}

.chatList{
  list-style: none;
  margin: 0;
  padding: 0;
  & > li{
    max-width: 70%;
    margin: 0 auto $space;
    .content{
      clear: both;
      border-radius: 10px;
      padding: $space-half;
      position: relative;
      margin-bottom: $space-half;
      &:last-child{
        &:after{
          content: '';
          display: block;
          width: 0;
          height: 0;
          border: 5px solid transparent;
          position: absolute;
          bottom: 0;
        }
      }
    }
    &.you{
      @include chatBubbleOptions(#eee, 'left', 5px);
      .ffbox-fix{
        padding-right: $space-half;
        vertical-align: bottom;
      }
    }
    &.me{
      @include chatBubbleOptions($C_blue, 'right', 5px);
    }
  }
}

// ------------ toggle pills ------------
.toggle-pill-list {
  list-style: none;
  padding-left: 0;
  li {
    display: inline-block;
  }
}

input[type="radio"].toggle-pill {
  display: none;
}

input[type="radio"].toggle-pill + label{
  border: 1px solid $C_blue;
  border-radius: 999px;
  color: $C_blue;
  margin-right: $space-half;
  padding: $space-half;
}

input[type="radio"].toggle-pill:checked + label {
  background: $C_blue;
  color: $C_textPrimaryInverted;
}

// ------------ Color swatches ------------

/*
.swatches-header {
  border-bottom: 1px solid $C_border;
  margin-top: $space;
}
*/

.color {
  border-radius: $defaultRadius;
  text-align: center;
  padding: $space;
  min-height: 160px;
  &.inverted {
    background: $C_contentBGInverted;
  }
}

$colorsList : (
  accent: $C_accent,
  link: $C_link,
  green: $C_green,
  border: $C_border,
  borderInverted: $C_borderInverted,
  textProtection: $C_textProtection,
  overlayPressed: $C_overlayPressed,
  shade: $C_shade,
  shadeInverted: $C_shadeInverted,
  textPrimary: $C_textPrimary,
  textSecondary: $C_textSecondary,
  textTertiary: $C_textTertiary,
  textPrimaryInverted: $C_textPrimaryInverted,
  textSecondaryInverted: $C_textSecondaryInverted,
  textTertiaryInverted: $C_textTertiaryInverted,
  contentBG: $C_contentBG,
  contentBGInverted: $C_contentBGInverted,
  collectionBGLight: $C_collectionBGLight,
  collectionBGDark: $C_collectionBGDark,
  blue: #68A5D9,
  yellow: #F0CB4F,
  purple: #7160AA,
  brown: #713F19,
  dkGrey: #353E48
);

.swatch {
  background: #f7f7f7; // get rid of this
  border-radius: 999px;
  height: $media-m;
  margin: $space auto;
  width: $media-m;

  @each $key, $value in $colorsList {
    &--#{$key} {
      background-color: $value;
    }
  }

  &--contentBG {
    border: 1px solid $C_border;
  }

}

// ------------ portrait header ------
// terribly named
.portrait-blur {
  background-size: cover;
  -webkit-filter: blur(100px) saturate(200%);
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  background-position: center;
  clip: rect(0, 100%, 100%, 0);
  transform: translate3d(0,0,0);
}

@include atMediaDown(small) {
  .portrait-blur {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    -webkit-filter: none;
  }
  .hide--at-small{
    display: none!important;
  }
}



// ------------ docStripe inverted ------------
.docStripe.inverted {
  background: $C_contentBGInverted;
}

// ------------ iOS centered header text ------
.ios .viewHead .viewHead-heading {
  text-align: center;
}

